<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">OO 第一单元总结 表达式求导 | L1l</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mondaycha.github.io/BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OO 第一单元总结 表达式求导 | L1l"><meta data-rh="true" name="description" content="OO第一单元通过三次递进式的作业让我们实现表达式求导，在这几次作业中我也有很多收获。下面就回顾一下前三次作业中存在的问题。"><meta data-rh="true" property="og:description" content="OO第一单元通过三次递进式的作业让我们实现表达式求导，在这几次作业中我也有很多收获。下面就回顾一下前三次作业中存在的问题。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mondaycha.github.io/BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导"><link data-rh="true" rel="alternate" href="https://mondaycha.github.io/BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导" hreflang="en"><link data-rh="true" rel="alternate" href="https://mondaycha.github.io/BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.fbc2a011.css">
<link rel="preload" href="/assets/js/runtime~main.f1753f1f.js" as="script">
<link rel="preload" href="/assets/js/main.b373ddf5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="MondayCha" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="MondayCha" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">L1l</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MondayCha" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">主页</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Algorithm/LeetCode/分隔链表">Algorithm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/BUAA/本科/操作系统实验/操作系统-OS-Lab0-实验报告">BUAA</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/BUAA/本科/操作系统实验/操作系统-OS-Lab0-实验报告">本科</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/BUAA/本科/操作系统实验/操作系统-OS-Lab0-实验报告">操作系统实验</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/BUAA/本科/航空航天概论/「航空航天概论」Week10">航空航天概论</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/BUAA/本科/软件工程/写在「软件工程」开课之前">软件工程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO-JML语言理论基础与工具链总结">面向对象设计与构造</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO-JML语言理论基础与工具链总结">2020 OO JML语言理论基础与工具链总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO-第二单元总结">2020 OO 第二单元总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO-第四单元总结">2020 OO 第四单元总结</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/Java求解一类特定表达式的化简思路探讨">Java求解一类特定表达式的化简思路探讨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO-第一单元总结-表达式求导">OO 第一单元总结 表达式求导</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/OO预习第三弹">OO预习第三弹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/为圣杯战争的开始献上礼炮">为圣杯战争的开始献上礼炮</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/简陋的Java生产者消费者模型">简陋的Java生产者消费者模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/BUAA/本科/面向对象设计与构造/面向过程的设计，和面向对象的设计异同点到底在哪？">面向过程的设计，和面向对象的设计异同点到底在哪？</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Courses/MIT-6.824/MIT-6.824-Lab-1">Courses</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Software/Frontend/从Hexo到Docusaurus">Software</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">BUAA</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">本科</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">面向对象设计与构造</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OO 第一单元总结 表达式求导</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>OO 第一单元总结 表达式求导</h1><p>OO第一单元通过三次递进式的作业让我们实现表达式求导，在这几次作业中我也有很多收获。下面就回顾一下前三次作业中存在的问题。</p><p>在个人看来，表达式求导的难点主要有三部分——对输入的处理、表达式的存储结构以及化简。这三次作业我所采用的表达式存储结构都不相同，不过重构的速度还是比较快的（安慰自己）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="第一次作业">第一次作业<a class="hash-link" href="#第一次作业" title="Direct link to heading">​</a></h2><p>在第一次作业中，我的程序总体架构为提取幂函数为Poly对象，建立Polynomial类解析表达式创建幂函数对象，在主类Derivative中进行部分性能优化工作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序结构分析">① 程序结构分析<a class="hash-link" href="#-程序结构分析" title="Direct link to heading">​</a></h3><p>UML类图：</p><p>第一次作业的幂函数因子较为简单，代码中仅提炼出Poly对象，并在其内部实现求导方法。</p><p><strong>Method复杂度：</strong></p><table><thead><tr><th>Method</th><th>ev(G)</th><th>iv(G)</th><th>v(G)</th></tr></thead><tbody><tr><td>Derivative.main(String[])</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Derivative.printAnswer(HashMap&lt;BigInteger,  Poly&gt;)</td><td>4</td><td>5</td><td>7</td></tr><tr><td>Poly.Poly(BigInteger,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.addCoef(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.compareTo(Object)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.derivative()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>Poly.equals(Object)</td><td>2</td><td>2</td><td>2</td></tr><tr><td>Poly.getCoeff()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.getIndex()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.hashCode()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Poly.toString()</td><td>1</td><td>11</td><td>12</td></tr><tr><td>Polynomial.Polynomial(String)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Polynomial.getPolyitem()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>Polynomial.getfirstitem()</td><td>1</td><td>9</td><td>10</td></tr></tbody></table><p>第一次作业中，化简主要在主类Derivative的printAnswer()方法（将第一个正项优先输出）和Poly类的toString()方法中，printAnswer()涉及对表达式的遍历，基本复杂性高；toString()则包含大量条件语句，多次调用了BigInteger中的方法，循环依赖性高。而表达式解析我采用的是正则+状态机的策略（这个策略三次作业均沿用，感觉还是很舒服的），在getfirstitem()中处理不同类型输入并归一化，代码较为复杂。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序bug分析">② 程序Bug分析<a class="hash-link" href="#-程序bug分析" title="Direct link to heading">​</a></h3><p>第一次作业在强测、互测中均未出现Bug。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-互测采用策略">③ 互测采用策略<a class="hash-link" href="#-互测采用策略" title="Direct link to heading">​</a></h3><p>互测时我采用的策略是“补刀”。我先是用简单的自动测试程序跑了下房间内成员的代码，不过貌似没有出现问题；然而圣杯战争发生了转机——Rider竟然拿下了一血！</p><p>于是我一一检查其他成员的代码，发现Berserker的正则存在问题：在正则中匹配的是“<code>[+|-]{0,2}(\\d*.)?x(..[+|-]?\\d+)?</code>”，其中的“.”可匹配任意字符，就会错误解析表达式。</p><p>第一次互测时认真读了屋内其他同学的代码，感觉还是很有收获的。之后两次大部分都读不下去，可读性实在是让人肝疼……放到评测姬里自生自灭吧！另外这次互测也让我意识到了高工同学的可怕之处（误），全屋子就这一个Bug，大佬换着花样hack……卷卷更健康。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-对象创建模式">④ 对象创建模式<a class="hash-link" href="#-对象创建模式" title="Direct link to heading">​</a></h3><p>在第一次作业中，我并没有应用对象创建模式，表达式解析就顺便new了新因子，Polynomial类的紧耦合比较严重。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="第二次作业">第二次作业<a class="hash-link" href="#第二次作业" title="Direct link to heading">​</a></h2><p>第二次作业增加了三角函数因子，这个时候我也偷偷看了一下去年的第三次作业题目，新增加的嵌套对于表达式的化简无疑是不小的挑战。所以在规划第二次作业的总体架构时，我就面临着一个选择——是要建立终将在第三次作业重构的四元组项；还是要采用“表达式-项-因子”三层结构，为第三次作业留好迭代的空间？</p><p>经过一番挣扎（其实并没有，因为我还不会写三层结构），我选择了势必带来重构的四元组形式，也就是将表达式的每一项以“<code>coeff*x**powindex*sin(x)**sinindex*cos(x)**cosindex</code>”的形式存储，这样处理方式就和第一次作业基本一致。在基本架构沿用第一次作业的情况下，第二次作业给我最大的挑战反而是三角函数的化简，我的化简类Simplify的行数是最多的。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序结构分析-1">① 程序结构分析<a class="hash-link" href="#-程序结构分析-1" title="Direct link to heading">​</a></h3><p><strong>UML类图</strong>：</p><p>架构基本沿用第一次作业，UML也差不多，不过这次的简化更复杂一些。</p><p><strong>Method复杂度：</strong></p><table><thead><tr><th>Method</th><th>ev(G)</th><th>iv(G)</th><th>v(G)</th></tr></thead><tbody><tr><td>DeriPrinter.DeriPrinter(HashMap&lt;String,  MutiItem&gt;)</td><td>1</td><td>7</td><td>7</td></tr><tr><td>DeriPrinter.getAnswer(HashMap&lt;String,  MutiItem&gt;)</td><td>4</td><td>5</td><td>7</td></tr><tr><td>DeriPrinter.printAnswer()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>Item.Item(BigInteger,BigInteger,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Item.compareTo(Object)</td><td>3</td><td>3</td><td>3</td></tr><tr><td>Item.equals(Object)</td><td>2</td><td>4</td><td>4</td></tr><tr><td>Item.getCosin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Item.getPowin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Item.getSinin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Item.hashCode()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>Item.toString()</td><td>1</td><td>5</td><td>8</td></tr><tr><td>MainClass.main(String[])</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.MutiItem(BigInteger,BigInteger,BigInteger,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.MutiItem(BigInteger,Item)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.addCoeff(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.compareTo(Object)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.derivate()</td><td>1</td><td>5</td><td>5</td></tr><tr><td>MutiItem.equals(Object)</td><td>2</td><td>2</td><td>2</td></tr><tr><td>MutiItem.getCoeff()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.getCosin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.getIdentity()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.getItem()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.getPowin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.getSinin()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.hashCode()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>MutiItem.toString()</td><td>1</td><td>5</td><td>5</td></tr><tr><td>ParseExp.MutiItemSign()</td><td>2</td><td>3</td><td>4</td></tr><tr><td>ParseExp.ParseExp(String)</td><td>1</td><td>5</td><td>6</td></tr><tr><td>ParseExp.WrongFormat(String)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>ParseExp.getExpression()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>ParseExp.getFirstitem()</td><td>3</td><td><strong>13</strong></td><td><strong>14</strong></td></tr><tr><td>Simplify.Simplify(HashMap&lt;String,  MutiItem&gt;)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>Simplify.exitmatch(BigInteger,Item,Item,Item,HashMap&lt;Item,  BigInteger&gt;)</td><td>2</td><td>3</td><td>4</td></tr><tr><td>Simplify.searchcos(HashMap&lt;Item,  BigInteger&gt;)</td><td><strong>4</strong></td><td>6</td><td>9</td></tr><tr><td>Simplify.simplify()</td><td>1</td><td>3</td><td>4</td></tr></tbody></table><p>由于一开始并没有明确的化简思路，在第一遍实现了基本求导功能的代码通过中测之后，我为了实现化简功能，又对代码内类的结构做了很多修改，在这一过程中，尽管我确实用类将表达式中的Item与MulItem做了封装，但我却胡乱修改内部方法，这并不符合面向对象的思想，也导致最后代码可读性极差，也为互测时被发现的Bug埋下了祸根。具体表现到MetricReloaded的分析上，就是ParseExp类的getFirstitem()依然是复杂度重灾区，没有采用工厂模式也使得它与其他类的依赖极为严重，优化输出的内容依然有很高的基本复杂性。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序bug分析-1">② 程序Bug分析<a class="hash-link" href="#-程序bug分析-1" title="Direct link to heading">​</a></h3><p>强测中获得性能分为16.545/20，在处理表达式化简时，我所采用的是暴力搜索的方式，每次搜索到可以合并的项就将其合并，然后进行重新搜索。</p><p>这种方法显然只能找到一个极优解，却不能找到最优解，表达式项存储顺序对结果也有很大影响。一种更加可行的方式是采用深度优先搜索，不过当时并没有想出具体的实现方法，只好作罢。</p><p>互测时被找出来一个Bug，同时发现Berserker的一个Bug（狂战士日常躺枪）。而我的Bug是HashMap的Key写错，在生成MulItem的Key时，我采用的是将指数拼接为String的方式，在指数较大时，可能会导致不同项被当作同一项存入HashMap中，造成求导错误。</p><p>修改也很简单，只需要在生成String的时候给不同指数加个分隔符就好了——</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MutiItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BigInteger</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">coeff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">item </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Item</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// before: identity = &quot;&quot; + b + c + d;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以发现这里我的MutiItem的构造方法是非常混乱的，不过没有发现这么明显的Bug，一方面就是混乱的优化带来的副作用；另一方面也是因为这样的数据出现几率确实很小，同屋里也只有一个同学发现了这个Bug（我后来和hack我的同学交流了下，果然是长时间跑随机自动测试程序才找到的……）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-互测采用策略-1">③ 互测采用策略<a class="hash-link" href="#-互测采用策略-1" title="Direct link to heading">​</a></h3><p>在这次互测是采用对拍+手动构造样例+Python生成随机数据自动评测的方式。屋内除我只有一个Bug，大家很快找到之后也比较佛系。</p><p>互测中阅读了同屋子大佬处理简化的DFS，确实厉害；另外还拜读了另一个房间Alterego的架构，类似Sympy的表达式结构简直叫人拍案叫绝，计算方式优美，让我看到了什么是真正的封装、多态、继承，也有更多信心去面对第三次作业。（不过听说在那个屋Alterego被hack的很惨，悲）</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-对象创建模式-1">④ 对象创建模式<a class="hash-link" href="#-对象创建模式-1" title="Direct link to heading">​</a></h3><p>在第二次作业中，由于使用的是和第一次作业类似的四元组项，我依然没有应用对象创建模式，表达式解析里又new了新因子，紧耦合依然严重。这在第三次作业中有一定改善。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="第三次作业">第三次作业<a class="hash-link" href="#第三次作业" title="Direct link to heading">​</a></h2><p>前两次作业都没有对表达式进行结构化处理，导致了第三次作业表达式的存储结构必须大改。</p><p>好在表达式求导的三大难点——对输入的处理、表达式的存储结构以及化简，这次都处理得比较好——</p><ul><li>对输入的处理上，有了前两次作业中采用的正则表达式加有限状态机读入的经验，修改很快；</li><li>表达式的存储结构上吸取了Alterego的架构（感谢Alterego！！！！），在进行重构的时候思路比较清晰，避免了第二次作业惨剧的重演；</li><li>化简上，层次化的表达式存储方式发挥出了它的优越性，通过统一的接口进行因子类型的转换，效果好；</li></ul><p>在第三次作业我也首次采用了Package来管理类，也是一个小进步。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序结构分析-2">① 程序结构分析<a class="hash-link" href="#-程序结构分析-2" title="Direct link to heading">​</a></h3><p><strong>UML类图：</strong></p><p>这一次的类图很乱，主要原因还是在于表达式也可以作为一个因子嵌套进三角函数中，类之间的相互调用也比较明显。</p><p><strong>Method复杂度：</strong></p><table><thead><tr><th>Method</th><th>ev(G)</th><th>iv(G)</th><th>v(G)</th></tr></thead><tbody><tr><td>homework.MainClass.main(String[])</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.expression.ExpFunction.Exception.Exception(String)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.expression.ExpFunction.deleteSpace(String)</td><td>3</td><td>7</td><td>10</td></tr><tr><td>homework.expression.ExpFunction.matchParentheses(String,int)</td><td>6</td><td>6</td><td>7</td></tr><tr><td>homework.expression.ExpFunction.readIndex(String)</td><td>2</td><td>1</td><td>2</td></tr><tr><td>homework.expression.ExpFunction.simplifyExpParentheses(String)</td><td>9</td><td>11</td><td>14</td></tr><tr><td>homework.expression.ExpFunction.simplifyParentheses(String,int[])</td><td>1</td><td>1</td><td>8</td></tr><tr><td>homework.expression.ExpFunction.simplifySign(String)</td><td>4</td><td>3</td><td>4</td></tr><tr><td>homework.expression.ExpParser.Exception.Exception(String)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.expression.ExpParser.ExpParser(String)</td><td>3</td><td>2</td><td>3</td></tr><tr><td>homework.expression.ExpParser.getItemAdd(String,boolean)</td><td>5</td><td>6</td><td>9</td></tr><tr><td>homework.expression.ExpParser.getItemMul(String)</td><td>4</td><td>3</td><td>5</td></tr><tr><td>homework.expression.ExpParser.matchParentheses()</td><td>7</td><td>4</td><td>8</td></tr><tr><td>homework.expression.ExpParser.readOneItem(String)</td><td>6</td><td>9</td><td>12</td></tr><tr><td>homework.expression.ExpParser.spliter()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.expression.ExpSimplify.ExpSimplify(Derivable)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.expression.ExpSimplify.OnlyOneDiff(Derivable,Derivable)</td><td>9</td><td>17</td><td>26</td></tr><tr><td>homework.expression.ExpSimplify.getDiff(boolean,int,int,ItemMul,ItemMul)</td><td>1</td><td>4</td><td>6</td></tr><tr><td>homework.expression.ExpSimplify.searchSimplify(ItemAdd)</td><td>4</td><td>4</td><td>4</td></tr><tr><td>homework.expression.ExpSimplify.simplify()</td><td>2</td><td>2</td><td>4</td></tr><tr><td>homework.polyitem.factor.Factor.Factor()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.Factor.Factor(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.Factor.getIndex()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.Factor.setIndex(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.Factor.updateIndex(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.FactorExp()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.FactorExp(ItemAdd)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.FactorExp(ItemAdd,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.clone()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.derivate()</td><td>4</td><td>4</td><td>5</td></tr><tr><td>homework.polyitem.factor.FactorExp.equals(Object)</td><td>3</td><td>3</td><td>4</td></tr><tr><td>homework.polyitem.factor.FactorExp.equalsZero()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.getExpression()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.identity()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FactorExp.toString()</td><td>1</td><td>4</td><td>4</td></tr><tr><td>homework.polyitem.factor.FactorFactory.readPower(Matcher)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.factor.FactorFactory.readTrian(Matcher)</td><td>1</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.factor.FactorFactory.simplifyFunc(Derivable)</td><td>2</td><td>4</td><td>5</td></tr><tr><td>homework.polyitem.factor.FuncConst.FuncConst()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.FuncConst(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.FuncConst(String)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.clone()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.derivate()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.equals(Object)</td><td>2</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.factor.FuncConst.equalsOne()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.equalsZero()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.getValue()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.identity()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.setValue(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.toString()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncConst.updateValue(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.FuncPower()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.FuncPower(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.clone()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.derivate()</td><td>1</td><td>1</td><td>2</td></tr><tr><td>homework.polyitem.factor.FuncPower.equals(Object)</td><td>2</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.factor.FuncPower.equalsZero()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.identity()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncPower.toString()</td><td>1</td><td>1</td><td>2</td></tr><tr><td>homework.polyitem.factor.FuncTrian.FuncTrian()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,ItemAdd)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncTrian.FuncTrian(boolean,ItemAdd,BigInteger)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.factor.FuncTrian.clone()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.factor.FuncTrian.derivate()</td><td>4</td><td>4</td><td>6</td></tr><tr><td>homework.polyitem.factor.FuncTrian.equals(Object)</td><td>6</td><td>4</td><td>8</td></tr><tr><td>homework.polyitem.factor.FuncTrian.equalsZero()</td><td>3</td><td>3</td><td>4</td></tr><tr><td>homework.polyitem.factor.FuncTrian.identity()</td><td>1</td><td>4</td><td>5</td></tr><tr><td>homework.polyitem.factor.FuncTrian.toString()</td><td>1</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemAdd.ItemAdd()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemAdd.ItemAdd(Derivable...)</td><td>1</td><td>3</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemAdd.ItemAdd(HashMap&lt;String,  Derivable&gt;)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemAdd.ItemAddPut(Derivable)</td><td>1</td><td>4</td><td>4</td></tr><tr><td>homework.polyitem.item.ItemAdd.PutItemMul(ItemMul)</td><td>1</td><td>5</td><td>5</td></tr><tr><td>homework.polyitem.item.ItemAdd.clone()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemAdd.derivate()</td><td>2</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemAdd.equals(Object)</td><td>3</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemAdd.equalsZero()</td><td>3</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemAdd.getAdditem()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemAdd.getOnlyOne()</td><td>4</td><td>2</td><td>4</td></tr><tr><td>homework.polyitem.item.ItemAdd.identity()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemAdd.onlyContainOne()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemAdd.toString()</td><td>6</td><td>5</td><td>7</td></tr><tr><td>homework.polyitem.item.ItemMul.ItemMul()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemMul.ItemMul(Derivable...)</td><td>3</td><td>3</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemMul.ItemMulPut(Derivable)</td><td>3</td><td>5</td><td>6</td></tr><tr><td>homework.polyitem.item.ItemMul.PutFactor(Factor)</td><td>6</td><td>10</td><td>10</td></tr><tr><td>homework.polyitem.item.ItemMul.PutItemMul(ItemMul)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemMul.clone()</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemMul.derivate()</td><td>6</td><td>2</td><td>7</td></tr><tr><td>homework.polyitem.item.ItemMul.equals(Object)</td><td>3</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemMul.equalsZero()</td><td>3</td><td>2</td><td>3</td></tr><tr><td>homework.polyitem.item.ItemMul.getCoeff()</td><td>2</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemMul.getMutiitem()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemMul.getOneExp()</td><td>5</td><td>2</td><td>5</td></tr><tr><td>homework.polyitem.item.ItemMul.identity()</td><td>2</td><td>3</td><td>4</td></tr><tr><td>homework.polyitem.item.ItemMul.negateCoeff(boolean)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemMul.onlyOneExp()</td><td>3</td><td>3</td><td>7</td></tr><tr><td>homework.polyitem.item.ItemMul.onlyOneFactor()</td><td>4</td><td>3</td><td>7</td></tr><tr><td>homework.polyitem.item.ItemMul.removeItem(Derivable)</td><td>1</td><td>2</td><td>2</td></tr><tr><td>homework.polyitem.item.ItemMul.setCoeffOne()</td><td>1</td><td>1</td><td>1</td></tr><tr><td>homework.polyitem.item.ItemMul.toString()</td><td>1</td><td>7</td><td>7</td></tr><tr><td>homework.polyitem.item.ItemMul.updateCoeff(BigInteger)</td><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>MetricReloaded分析程序复杂度更加病态了，大量方法的结构化程度存在问题，并且集中在与化简有关的方法中。表达式解析中的readOneItem()方法三项均超标，虽然我已经进行了采用了一部分的工厂模式、将正则表达式存入单独的类中以被调用的解耦合的努力。</p><p><strong>Package复杂度：</strong></p><table><thead><tr><th>Package</th><th>v(G)avg</th><th>v(G)tot</th></tr></thead><tbody><tr><td>homework</td><td>2</td><td>2</td></tr><tr><td>homework.expression</td><td>6.68</td><td>127</td></tr><tr><td>homework.polyitem.factor</td><td>1.86</td><td>93</td></tr><tr><td>homework.polyitem.item</td><td>3.38</td><td>115</td></tr></tbody></table><p>通过分包，将几大功能区分开（不过这次看到20%的性能分，增加了暴力搜索提取公因式的简化方法，还是放在Exp处理中，所以耦合度也有点高）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-程序bug分析-2">② 程序Bug分析<a class="hash-link" href="#-程序bug分析-2" title="Direct link to heading">​</a></h3><p>“OO中最惨的，不是被同屋hack了50个同质Bug，而是在截止提交的下一秒意识到了自己的Bug”</p><p align="right">——沃茨基·硕德</p>在第三次作业中，我为了简化做了不少工作，也用随机数据自动测试程序做了大量的检验。然而就在周六晚上截止提交后的几秒，我突然意识到我的输出是有问题的——对于表达式因子，我将其设置为继承了Factor类，同样拥有指数Index属性，在输出时，采用的是和幂函数、三角函数一样的输出方式——“`(exp)**index`”，但在输入时表达式因子是不允许有指数的，因此属于WF。但对于Sympy，表达式的格式限定很宽松，通过计算并不能找到错误。<p>那能咋办……周六晚上看番转移注意力，周日在互测中尽可能挽回损失……最后发现强测没有出现这种输出，但互测时被同屋两名Servent发现了这个Bug。好在修复工作也比较简单，实在是侥幸。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-互测采用策略-2">③ 互测采用策略<a class="hash-link" href="#-互测采用策略-2" title="Direct link to heading">​</a></h3><p>在这次互测依然是采用对拍（对军宝具）+手动构造样例（我自己构造了可能会TLE的样例，也分享到了群里）+Python生成随机数据自动评测的方式。</p><p>在这次对Python生成随机数据做了优化，比如Caster在指数为0时会出现各种吊诡的错误，然而互测限定指数&gt;0，于是我将对Caster的随机数据设为指数始终&gt;0，其他成员照旧，避免了反复查看不能hack的Bug带来的失落感。</p><p>最后稍微吐槽一下“不优化就不会Die”，在这次互测中，房间内8名成员，4名优化输出4名不优化，最后出Bug的都是那4名优化输出的……其中Berserker还会在表达式嵌套过多时陷入死循环，截止至本文发稿时已被修好。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-对象创建模式-2">④ 对象创建模式<a class="hash-link" href="#-对象创建模式-2" title="Direct link to heading">​</a></h3><p>在这次的作业中终于用到了工厂模式！虽然原因是表达式解析方法太长，不得不将生成项的代码独立开来。不过我也只用工厂模式处理了幂函数、不含嵌套因子的三角函数、常数，含嵌套因子的三角函数的生成与我的状态机密切相关，难以抽象出来，这也是我的架构中的不足。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="心得体会">心得体会<a class="hash-link" href="#心得体会" title="Direct link to heading">​</a></h2><p>在寒假的时候，我曾看到知乎上@HansBug学长关于OO课程改革的回答，而通过这一个多月的实际体验，OO给我的感受还是很赞的，通过互测阅读同学代码、与舍友们的交流（感谢@VOIDMalkuth！！！）、水讨论区以及学习理论课，收获很大。</p><p>第一单元也只是从面向过程到面向对象的过渡篇章，通过这次反思，我也发现了过去几次代码中自己结构较为不合理的部分，希望能够在接下来多线程等知识的学习中进一步改善。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>这是一篇从Hexo迁移的文章，创建于2020-03-20 04:53:41</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/BUAA/本科/面向对象设计与构造/Java求解一类特定表达式的化简思路探讨"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Java求解一类特定表达式的化简思路探讨</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/BUAA/本科/面向对象设计与构造/OO预习第三弹"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OO预习第三弹</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第一次作业" class="table-of-contents__link toc-highlight">第一次作业</a><ul><li><a href="#-程序结构分析" class="table-of-contents__link toc-highlight">① 程序结构分析</a></li><li><a href="#-程序bug分析" class="table-of-contents__link toc-highlight">② 程序Bug分析</a></li><li><a href="#-互测采用策略" class="table-of-contents__link toc-highlight">③ 互测采用策略</a></li><li><a href="#-对象创建模式" class="table-of-contents__link toc-highlight">④ 对象创建模式</a></li></ul></li><li><a href="#第二次作业" class="table-of-contents__link toc-highlight">第二次作业</a><ul><li><a href="#-程序结构分析-1" class="table-of-contents__link toc-highlight">① 程序结构分析</a></li><li><a href="#-程序bug分析-1" class="table-of-contents__link toc-highlight">② 程序Bug分析</a></li><li><a href="#-互测采用策略-1" class="table-of-contents__link toc-highlight">③ 互测采用策略</a></li><li><a href="#-对象创建模式-1" class="table-of-contents__link toc-highlight">④ 对象创建模式</a></li></ul></li><li><a href="#第三次作业" class="table-of-contents__link toc-highlight">第三次作业</a><ul><li><a href="#-程序结构分析-2" class="table-of-contents__link toc-highlight">① 程序结构分析</a></li><li><a href="#-程序bug分析-2" class="table-of-contents__link toc-highlight">② 程序Bug分析</a></li><li><a href="#-互测采用策略-2" class="table-of-contents__link toc-highlight">③ 互测采用策略</a></li><li><a href="#-对象创建模式-2" class="table-of-contents__link toc-highlight">④ 对象创建模式</a></li></ul></li><li><a href="#心得体会" class="table-of-contents__link toc-highlight">心得体会</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.f1753f1f.js"></script>
<script src="/assets/js/main.b373ddf5.js"></script>
</body>
</html>